# Blueprint metadata
blueprint:
  name: Cover control by Xiaomi button
  description: |    
  source_url: https://github.com/bzmotoros/home-assistant/edit/main/cover.yaml
  domain: automation
  input:
    controller_device:
      name: (Required) Controller Device
      description: The controller device which will control the Cover. Choose a value only if the integration used to connect the controller to Home Assistant exposes it as a Device. This value should match the one specified in the corresponding Controller automation.
      default: ''
      selector:
        device:    
    cover:
      name: (Required) Cover
      description: Cover which will be controlled with this automation.
      selector:
        entity:
          domain: cover
mode: restart
max_exceeded: silent
trigger:
  - device_id: !input controller_device
    domain: zha
    platform: device
    type: remote_button_short_press
    id: zar
  - device_id: !input controller_device
    domain: zha
    platform: device
    type: remote_button_double_press
    id: nyit       
condition: []
action:
  - choose:
      - conditions:
          - condition: trigger
            id:
              - zar
        sequence:
          - service: cover.close_cover
            metadata: {}
            data: {}
            target:
              entity_id: !input cover
        alias: Zar
      - conditions:
          - condition: trigger
            id:
              - nyit
        sequence:
          - service: cover.open_cover
            metadata: {}
            data: {}
            target:
              entity_id: !input cover          
        alias: Nyit
